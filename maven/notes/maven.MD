# MAVEN

# What is Maven?

- **Maven is a build tool**

  These tools take the source code and generate some sort of library. They pack out code into a kind of distributable library.

- **Dependency management tool**

  We build applications that rely on third part libraries. With maven we change the way we obtain those dependencies and the way we manage them.

- Project management tool
- Standarized approach to build software 
- Command line tool
- IDE integration

## Build tools

- Create deployable artifacts from source code
- Automated/repetable builds
- Deploying artifacts on servers
- IDE independence
- Integration with other build toold

## Dependency Management

- Download project dependencies from centralized repositories
- Automatically resolve the libraries by project dependencies
- Dependency scoping: conditionally include certain dependencies

## Project Management

- Artifact versioning
- Change logs
- Documentation
- Javadocs
- Reports

## Standarized software builds

- Uniformity across projects through patterns: standard directory patterns
- Convention over configuration
- Consistent path for all projects
- Philosophy of maven: standarize apache projects structure

# Maven Landscape

## Project Object Model (POM)

- Describes, configures and customizes a Maven Project
- Maven reads the pom.xml file to build a project
- Defines the "address" for the project artifact using a coordinate system
  - artifactId
  - groupId
  - version
- Specifies project information, plugins, goals, dependencies and profiles 

## Repositories

- Holds build artifacts and dependencies of varying types
- Local repositories (local cache)
- Remote repositories
- Local repository takes precedence during dependency resolution

## Plugin And Goals

- Plugin is a collection of goals
- Example: compiler plugin
- Goals performs the actions in Maven builds
- All work is donde via plugins and goals
- Called independently or as part of a lifecycle phase
- We can thinks goals as methods, actions that we can execute to perform our maven builds

## Lifecycle and Phases

- Lifecycle is a sequence of named phases
- Phases are executed sequentially
- 3 lifecycles: clean, default, site
- Executing a phase executes all previous phases

# Maven Technical Overview

![](./how-maven-works.png)

# Maven lifecyle and basic maven commands

## Default maven lifecycle

![](./lifecycle.png)

Consists of 8 major steps or phases for compiling, testing, building and installing a given java project as specifies below:

- **Validate:** This step validates if the the project structure is correct. For examples: it checks if all the dependencies have been downloaded and are available in the local repository.

- **Compile:** It compiles the source code ans stores the classes in the target/classes directory

- **Test:** It runs unit tests for the priject.

- **Package:** This step packages the compiled code in a distributable format like JAR or WAR.

- **Integration Tests:** It runs the integration tests for the project

- **Verify:** This step runs checks to verify that the project is valid and meets quality standards.

- **Install:** This step installs the packaged code in the local maven repository.

- **Deploy:** It shares the packaged code to the remote repository for sharing it with other developers.

## Maven Commands:

- **mvn clean** cleans the project and removes all files generated by the previous build
- **mvn compile** compiles source code of the project
- **mvn test-compile** compiles the test source code
- **mvn test** runs tests for the project
- **mvn package** creates JAR ow WAR file for the project to convert it into a distributable format
- **mvn install** deploys the packaged JAR/WAR file to the local repository
- **mvn site** generate the project documentation
- **mvn validate** validate the project's POM and configuration
- **mvn idea:idea** generates project files for intellij
- **mvn release:perform** performs a release build
- **mvn deploy** copies the packaged JAR/WAR file to the remote repository
- **mvn arehctype:generate** this command is used to generate a new project from an archetype, which is a template for a project. This command is typically used to create new projects based on  a specific pattern or structure  
- **mvn dependency:tree** this command is used to display the dependncies of the project in a tree format. This command is typically used to understand the dependencies of the prihect and troubleshoot any issues.

# Maven dependencies

Maven simplifies the creation and management of dependencies by using a centralized repository that contains a vast collection of open-source libraries and frameworks.

To define a dependency you need to specify the group ID, artifact ID, and version of the dependency.

![](/dependency.png)

## Resolve Dependencies

Once the dependencies are defined in the "pom.xml" file, Maven will automatically download and resolve the dependencies from the central repository. Maven check if the dependency is already downloaded in the local repository, and if not, downloads it from the central repository.

## Dependency Scope

Dependencies in Maven can hace different scopes, which determine when and where the dependency is used. The four main scopes are: **compile, provided, runtime and test**. The scope can be specified in the dependency declaration.

## Managing Dependencies

Maven provides several goals to manage dependencies. Including adding, removing, and updating dependencies. For example, to update a dependency, you can use the following command:

```bash
mvn versions:use-latest-versions
```

This will update all the project's dependencies to the latest version available in the central repository.

## Types of dependencies:

In maven there are several types of dependencies that can be defined in the project's "pom.xml" file. These dependencies specify the libraries or frameworks that the project needs to compile, test, or run. The main types of dependencies in maven are:

- **Compile dependencies:** these dependencies are required ofr the project to compile and build correctly. Maven download this dependencies and adds them to the project's classpath. These dependencies are also packaged in the output JAR.

- **Provided dependencies:** These dependencies are required for the project to compile, but they are expected to be provided by the runtime environment. Examples of such dependencies are servlet-api and jsp-api. These dependencies are not packeged in the project's output JAR.

- **Runtime dependencies:** These dependencies are required for the project to run but are not required for the project to compile. These dependencies are added to the claspath at runtime, but they are not packaged in the project's output JAR.

- **Test dependencies:** These dependencies are required for the project's tests but are not required for the project to compile or run. These dependencies are added to the classpath when running tests, bu they are no packaged in the project's output JAR.

- **System dependencies:** These dependencies are not available in the central maven repository and are required to be manually installed on the local machine. To include system dependencies in the project, you must specify the path to the dependency JAR file.

- **Import dependencies:** These dependencies are used to import dependencies from other maven projects. When importing a dependency, maven will use the imported project's "pom.xml" file to download and manage the dependency.

# Maven plugins

The maven plugins are central part of maven framework, it is used to perform specific goal.

According to apache maven, there are 2 types of maven plugins:
- Build plugins
- Reporting plugins

## Build Plugins

These plugins are executed at the time of build. 

## Reporting plugins

These plugins are executed at the time of site generation.

## Core plugins

![](/core-plugins.png)
